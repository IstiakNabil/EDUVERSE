{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>{{ title }}</h2>
    <hr>

    {# Add enctype for file uploads like thumbnails #}
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="mb-3">
            <label for="{{ form.title.id_for_label }}" class="form-label">Course Title</label>
            {{ form.title }}
        </div>

        <div class="mb-3">
            <label for="{{ form.description.id_for_label }}" class="form-label">Description</label>
            {{ form.description }}
        </div>

        <div class="mb-3">
            <label for="{{ form.thumbnail.id_for_label }}" class="form-label">Thumbnail Image</label>
            {{ form.thumbnail }}
             {% if course.thumbnail %}
                <div class="mt-2">
                    <small>Current:</small>
                    <img src="{{ course.thumbnail.url }}" alt="Current thumbnail" style="width: 100px; height: auto; border-radius: 5px;">
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.price.id_for_label }}" class="form-label">Price (BDT)</label>
            {{ form.price }}
        </div>

        <div class="mb-3">
            <label for="{{ form.category.id_for_label }}" class="form-label">Category</label>
            {{ form.category }}
        </div>

        <button type="submit" class="btn btn-success">
            {% if course %}Update Course{% else %}Create Course{% endif %}
        </button>
        <a href="{% if course %}{{ course.get_absolute_url }}{% else %}{% url 'courses:course_list' %}{% endif %}" class="btn btn-secondary">Cancel</a>
    </form>
</div>
{% endblock content %}